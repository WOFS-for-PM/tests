# Jobs: 1 (f=1): [W(1)][9.7%][w=999MiB/s][w=256k IOPS][eta 00m:28s]
# Jobs: 1 (f=1): [W(1)][8.3%][w=1003MiB/s][w=257k IOPS][eta 00m:33s]
# Jobs: 1 (f=1): [W(1)][12.5%][w=997MiB/s][w=255k IOPS][eta 00m:28s]
# Jobs: 1 (f=1): [W(1)][11.4%][w=1001MiB/s][w=256k IOPS][eta 00m:31s]
# Jobs: 1 (f=1): [W(1)][15.6%][w=1005MiB/s][w=257k IOPS][eta 00m:27s]
# Jobs: 1 (f=1): [W(1)][14.3%][w=1018MiB/s][w=261k IOPS][eta 00m:30s] 
# Jobs: 1 (f=1): [W(1)][18.8%][w=1012MiB/s][w=259k IOPS][eta 00m:26s]
# Jobs: 1 (f=1): [W(1)][17.6%][w=1020MiB/s][w=261k IOPS][eta 00m:28s] 
# Jobs: 1 (f=1): [W(1)][21.9%][w=1020MiB/s][w=261k IOPS][eta 00m:25s]
# Jobs: 1 (f=1): [W(1)][20.6%][w=1018MiB/s][w=261k IOPS][eta 00m:27s] 
# Jobs: 1 (f=1): [W(1)][25.0%][w=1018MiB/s][w=261k IOPS][eta 00m:24s]
# Jobs: 1 (f=1): [W(1)][24.2%][w=1019MiB/s][w=261k IOPS][eta 00m:25s] 
# Jobs: 1 (f=1): [W(1)][28.1%][w=1013MiB/s][w=259k IOPS][eta 00m:23s]
# Jobs: 1 (f=1): [W(1)][27.3%][w=1019MiB/s][w=261k IOPS][eta 00m:24s] 
# Jobs: 1 (f=1): [W(1)][31.2%][w=1017MiB/s][w=260k IOPS][eta 00m:22s]
# Jobs: 1 (f=1): [W(1)][30.3%][w=1016MiB/s][w=260k IOPS][eta 00m:23s] 
# Jobs: 1 (f=1): [W(1)][34.4%][w=1020MiB/s][w=261k IOPS][eta 00m:21s]
# Jobs: 1 (f=1): [W(1)][33.3%][w=1024MiB/s][w=262k IOPS][eta 00m:22s] 
# Jobs: 1 (f=1): [W(1)][37.5%][w=1016MiB/s][w=260k IOPS][eta 00m:20s]
# Jobs: 1 (f=1): [W(1)][36.4%][w=1013MiB/s][w=259k IOPS][eta 00m:21s] 
# Jobs: 1 (f=1): [W(1)][40.6%][w=1019MiB/s][w=261k IOPS][eta 00m:19s]
# Jobs: 1 (f=1): [W(1)][39.4%][w=1016MiB/s][w=260k IOPS][eta 00m:20s] 
# Jobs: 1 (f=1): [W(1)][43.8%][w=1015MiB/s][w=260k IOPS][eta 00m:18s]
# Jobs: 1 (f=1): [W(1)][42.4%][w=1016MiB/s][w=260k IOPS][eta 00m:19s] 
# Jobs: 1 (f=1): [W(1)][45.5%][w=1017MiB/s][w=260k IOPS][eta 00m:18s]
# Jobs: 1 (f=1): [W(1)][45.5%][w=1020MiB/s][w=261k IOPS][eta 00m:18s] 
# Jobs: 1 (f=1): [W(1)][48.5%][w=1016MiB/s][w=260k IOPS][eta 00m:17s]
# Jobs: 1 (f=1): [W(1)][48.5%][w=1020MiB/s][w=261k IOPS][eta 00m:17s] 
# Jobs: 1 (f=1): [W(1)][51.5%][w=1012MiB/s][w=259k IOPS][eta 00m:16s]
# Jobs: 1 (f=1): [W(1)][51.5%][w=1014MiB/s][w=260k IOPS][eta 00m:16s] 
# Jobs: 1 (f=1): [W(1)][54.5%][w=1022MiB/s][w=262k IOPS][eta 00m:15s]
# Jobs: 1 (f=1): [W(1)][56.2%][w=1020MiB/s][w=261k IOPS][eta 00m:14s] 
# Jobs: 1 (f=1): [W(1)][57.6%][w=1013MiB/s][w=259k IOPS][eta 00m:14s]
# Jobs: 1 (f=1): [W(1)][59.4%][w=1021MiB/s][w=261k IOPS][eta 00m:13s] 
# Jobs: 1 (f=1): [W(1)][60.6%][w=1020MiB/s][w=261k IOPS][eta 00m:13s]
# Jobs: 1 (f=1): [W(1)][62.5%][w=1022MiB/s][w=262k IOPS][eta 00m:12s] 
# Jobs: 1 (f=1): [W(1)][63.6%][w=1011MiB/s][w=259k IOPS][eta 00m:12s]
# Jobs: 1 (f=1): [W(1)][65.6%][w=1014MiB/s][w=259k IOPS][eta 00m:11s] 
# Jobs: 1 (f=1): [W(1)][66.7%][w=1017MiB/s][w=260k IOPS][eta 00m:11s]
# Jobs: 1 (f=1): [W(1)][68.8%][w=1016MiB/s][w=260k IOPS][eta 00m:10s] 
# Jobs: 1 (f=1): [W(1)][69.7%][w=1021MiB/s][w=261k IOPS][eta 00m:10s]
# Jobs: 1 (f=1): [W(1)][71.9%][w=1015MiB/s][w=260k IOPS][eta 00m:09s] 
# Jobs: 1 (f=1): [W(1)][72.7%][w=1018MiB/s][w=261k IOPS][eta 00m:09s]
# Jobs: 1 (f=1): [W(1)][75.0%][w=1022MiB/s][w=262k IOPS][eta 00m:08s] 
# Jobs: 1 (f=1): [W(1)][75.8%][w=1017MiB/s][w=260k IOPS][eta 00m:08s]
# Jobs: 1 (f=1): [W(1)][78.1%][w=1016MiB/s][w=260k IOPS][eta 00m:07s] 
# Jobs: 1 (f=1): [W(1)][78.8%][w=1016MiB/s][w=260k IOPS][eta 00m:07s]
# Jobs: 1 (f=1): [W(1)][81.2%][w=1018MiB/s][w=261k IOPS][eta 00m:06s] 
# Jobs: 1 (f=1): [W(1)][81.8%][w=1021MiB/s][w=261k IOPS][eta 00m:06s]
# Jobs: 1 (f=1): [W(1)][84.4%][w=1024MiB/s][w=262k IOPS][eta 00m:05s] 
# Jobs: 1 (f=1): [W(1)][84.8%][w=1012MiB/s][w=259k IOPS][eta 00m:05s]
# Jobs: 1 (f=1): [W(1)][87.5%][w=1017MiB/s][w=260k IOPS][eta 00m:04s] 
# Jobs: 1 (f=1): [W(1)][87.9%][w=1019MiB/s][w=261k IOPS][eta 00m:04s]
# Jobs: 1 (f=1): [W(1)][90.6%][w=1017MiB/s][w=260k IOPS][eta 00m:03s] 
# Jobs: 1 (f=1): [W(1)][90.9%][w=1011MiB/s][w=259k IOPS][eta 00m:03s]
# Jobs: 1 (f=1): [W(1)][93.8%][w=1022MiB/s][w=262k IOPS][eta 00m:02s] 
# Jobs: 1 (f=1): [W(1)][93.9%][w=1022MiB/s][w=262k IOPS][eta 00m:02s]
# Jobs: 1 (f=1): [W(1)][96.9%][w=1022MiB/s][w=262k IOPS][eta 00m:01s] 
# Jobs: 1 (f=1): [W(1)][97.0%][w=1022MiB/s][w=262k IOPS][eta 00m:01s]
# Jobs: 1 (f=1): [W(1)][100.0%][w=1018MiB/s][w=260k IOPS][eta 00m:00s]
# Jobs: 1 (f=1): [W(1)][100.0%][w=1018MiB/s][w=261k IOPS][eta 00m:00s]

import re

def extract_splitfs_bw_log(log):
    bws = []
    for line in log:
        m = re.search(r'w=(\d+)MiB/s', line)
        if m:
            bws.append(int(m.group(1)))
    return bws

log_file = './SplitFS-FIO_bw.log'

with open(log_file) as f:
    bws = extract_splitfs_bw_log(f.readlines())

out_file = './SplitFS-FIO_bw.1.log'

time_interval = 500 # ms

with open(out_file, 'w') as f:
    for bw in bws:
        f.write(str(time_interval) + ", " + str(bw * 1024) + ", 1, 0, 0" '\n')
        time_interval += 500